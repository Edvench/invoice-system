"use strict";var __decorate=this&&this.__decorate||function(e,t,i,o){var s,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var n=e.length-1;0<=n;n--)(s=e[n])&&(l=(r<3?s(l):3<r?s(t,i,l):s(t,i))||l);return 3<r&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),rxjs_1=require("rxjs"),DialogComponent=function(){function e(e,t,i,o){this.dialogRef=e,this.uploadService=t,this.invoiceService=i,this.fileService=o,this.files=new Set,this.canBeClosed=!0,this.primaryButtonText="Upload",this.showCancelButton=!0,this.uploading=!1,this.uploadSuccessful=!1}return e.prototype.ngOnInit=function(){},e.prototype.onFilesAdded=function(){var e=this.file.nativeElement.files;for(var t in e)isNaN(parseInt(t))||this.files.add(e[t])},e.prototype.addFiles=function(){this.file.nativeElement.click()},e.prototype.closeDialog=function(){var t=this;if(this.uploadSuccessful)return this.dialogRef.close();this.uploading=!0,this.progress=this.uploadService.upload(this.files),this.uploadService.getSheetNameArray(),this.fileService.setFile(this.progress);var e=[];for(var i in this.progress)e.push(this.progress[i].progress);this.primaryButtonText="Finish",this.canBeClosed=!1,this.dialogRef.disableClose=!0,this.showCancelButton=!1,rxjs_1.forkJoin(e).subscribe(function(e){t.canBeClosed=!0,t.dialogRef.disableClose=!1,t.uploadSuccessful=!0,t.uploading=!1})},__decorate([core_1.ViewChild("file",{static:!1})],e.prototype,"file",void 0),e=__decorate([core_1.Component({moduleId:module.id,selector:"app-dialog",templateUrl:"dialog.component.html",styleUrls:["dialog.component.scss","../../../Styles/global.scss"]})],e)}();exports.DialogComponent=DialogComponent;